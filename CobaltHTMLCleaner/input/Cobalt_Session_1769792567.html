<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cobalt - Session Viewer</title>
    <link
      rel="icon"
      type="image/png"
      href="https://cobalt-xil.pages.dev/Assets/Logo.png"
    />
    <style>
      :root {
        --bg-color: #0b0b0b;
        --surface-color: #161b22;
        --border-color: #30363d;
        --text-primary: #c9d1d9;
        --text-secondary: #8b949e;
        --accent-blue: #58a6ff;
        --accent-green: #3fb950;
        --accent-orange: #d29922;
        --accent-red: #ff7b72;
        --font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Helvetica, Arial, sans-serif;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-primary);
        font-family: var(--font-family);
        margin: 0;
        padding: 0;
        font-size: 13px;
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      /* Top Header */
      .app-header {
        height: 50px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        background-color: var(--bg-color);
        flex-shrink: 0;
        z-index: 10;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 16px;
        font-weight: 600;
        color: #fff;
      }

      .brand-icon {
        width: 20px;
        height: 20px;
        background-image: url("https://cobalt-xil.pages.dev/Assets/Logo.png");
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }

      .session-container {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
      }

      .session-info {
        color: var(--text-secondary);
        font-family: monospace;
        font-size: 12px;
        cursor: pointer;
        padding: 2px 5px;
        border-radius: 4px;
        transition: background-color 0.2s ease;
        user-select: none;
      }

      .session-info:hover {
        background-color: #1c2128;
      }

      .session-id {
        color: #fff;
      }

      .session-tooltip {
        position: absolute;
        top: 100%;
        right: 0;
        background-color: #1c2128;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        padding: 10px;
        z-index: 100;
        width: 250px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        margin-top: 5px;
        opacity: 0;
        transform: translateY(-10px);
        pointer-events: none;
        visibility: hidden;
        transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s;
      }

      .session-tooltip::before {
        content: "";
        position: absolute;
        top: -10px;
        left: 0;
        width: 100%;
        height: 10px;
        background: transparent;
      }

      .session-container:hover .session-tooltip,
      .session-tooltip.visible {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
        visibility: visible;
      }

      .tooltip-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 11px;
      }

      .tooltip-label {
        color: var(--text-secondary);
      }

      .tooltip-value {
        color: var(--text-primary);
        font-family: monospace;
        user-select: text;
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        .app-header {
          height: auto;
          flex-wrap: wrap;
          padding: 10px;
          gap: 10px;
        }

        .brand {
          font-size: 14px;
        }

        .session-container {
          align-items: flex-start;
          display: none;
          /* Hide session info on mobile to save space */
        }

        .trace-toolbar {
          height: auto;
          flex-wrap: wrap;
          padding: 10px;
          gap: 10px;
          justify-content: space-between;
        }

        /* Hide non-essential info on mobile */
        .trace-toolbar > div:first-child,
        #statsLabel {
          display: none;
        }

        .search-widget {
          width: 100%;
          order: 3;
          margin-top: 5px;
        }

        .view-toggle {
          width: 100%;
          display: flex;
        }

        .view-btn {
          flex: 1;
          text-align: center;
        }

        .row-list {
          width: 60vw;
          /* Use viewport width to prevent runaway expansion */
        }

        .col-list {
          width: 60vw;
          flex: none;
        }

        .details-panel.visible {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: 1000;
          border-left: none;
        }

        .details-header-top {
          margin-top: 10px;
        }

        /* Fix Details Header Overflow */
        .details-title-group {
          min-width: 0;
          flex: 1;
          margin-right: 10px;
        }

        .details-name-large {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .details-actions {
          flex-shrink: 0;
        }

        /* Allow wrapping for paths on mobile */
        .details-path-row,
        .origin-row,
        .remote-path-copy {
          white-space: normal !important;
          word-break: break-all;
        }
      }

      /* Scrollbars */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #0d1117;
      }

      ::-webkit-scrollbar-thumb {
        background: #30363d;
        border-radius: 5px;
        border: 2px solid #0d1117;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #8b949e;
      }

      ::-webkit-scrollbar-corner {
        background: var(--bg-color);
      }

      /* Heatmap Styles */
      .heatmap-container {
        flex: 1;
        display: none;
        flex-direction: column;
        overflow: hidden;
        background-color: var(--bg-color);
        position: relative;
      }

      .heatmap-container.visible {
        display: flex;
      }

      .heatmap-canvas {
        flex: 1;
        width: 100%;
        height: 100%;
      }

      .view-toggle {
        display: flex;
        background: #1c2128;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        overflow: hidden;
      }

      .view-btn {
        padding: 4px 12px;
        font-size: 12px;
        cursor: pointer;
        color: var(--text-secondary);
        background: transparent;
        border: none;
        transition: all 0.2s;
      }

      .view-btn.active {
        background: var(--accent-blue);
        color: white;
      }

      .view-btn:hover:not(.active) {
        background: #30363d;
      }

      /* Main Layout */
      .main-container {
        display: flex;
        flex: 1;
        overflow: hidden;
      }

      /* Left Panel: Trace View */
      .trace-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        border-right: 1px solid var(--border-color);
        min-width: 0;
        overflow: hidden;
      }

      .trace-toolbar {
        height: 40px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        padding: 0 10px;
        gap: 10px;
        background-color: var(--bg-color);
        flex-shrink: 0;
      }

      .search-widget {
        display: flex;
        flex-direction: column;
        background-color: var(--bg-color);
        border: 1px solid var(--border-color);
        border-radius: 6px;
        width: 320px;
        position: relative;
        transition: border-color 0.2s ease, border-radius 0.2s ease;
        box-sizing: border-box;
      }

      .search-widget:focus-within {
        border-color: var(--accent-blue);
      }

      .search-widget:focus-within > .search-options {
        border-color: var(--accent-blue);
      }

      .search-widget.expanded {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        border-bottom-color: transparent;
      }

      .search-row {
        display: flex;
        align-items: center;
        padding: 4px;
      }

      .search-chevron {
        cursor: pointer;
        padding: 2px;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease, color 0.2s ease;
        width: 20px;
        height: 20px;
        border-radius: 4px;
      }

      .search-chevron:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
      }

      .search-chevron.expanded {
        transform: rotate(90deg);
      }

      .search-input-container {
        flex: 1;
        display: flex;
        align-items: center;
        margin-left: 4px;
      }

      .search-input {
        background: transparent;
        border: none;
        color: var(--text-primary);
        font-size: 12px;
        width: 100%;
        outline: none;
        height: 20px;
      }

      .search-options {
        transition: border-color 0.2s ease, border-radius 0.2s ease;
        display: none;
        padding: 10px;
        border: 1px solid var(--border-color);
        border-top: none;
        background-color: var(--bg-color);
        flex-direction: column;
        gap: 12px;
        position: absolute;
        top: 100%;
        left: -1px;
        right: -1px;
        z-index: 100;
        border-bottom-left-radius: 6px;
        border-bottom-right-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        box-sizing: border-box;
      }

      .search-options.visible {
        display: flex;
      }

      .time-range-row {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        color: var(--text-secondary);
      }

      .filter-options-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        padding-top: 8px;
        border-top: 1px solid var(--border-color);
      }

      .filter-checkbox-label {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 11px;
        color: var(--text-secondary);
        cursor: pointer;
        user-select: none;
      }

      .filter-checkbox-label:hover {
        color: var(--text-primary);
      }

      .filter-checkbox {
        accent-color: var(--accent-blue);
      }

      .time-input-styled {
        background-color: #161b22;
        border: 1px solid var(--border-color);
        color: var(--text-primary);
        border-radius: 4px;
        padding: 4px 8px;
        width: 60px;
        outline: none;
        font-size: 11px;
        transition: border-color 0.2s ease;
        margin: 0 2px;
      }

      .time-input-styled:focus {
        border-color: var(--accent-blue);
      }

      .unit-select {
        background-color: #161b22;
        border: 1px solid var(--border-color);
        color: var(--text-primary);
        border-radius: 4px;
        outline: none;
        font-size: 11px;
        padding: 3px 6px;
        cursor: pointer;
        transition: border-color 0.2s ease;
      }

      .unit-select:focus {
        border-color: var(--accent-blue);
      }

      .trace-header-row {
        display: flex;
        height: 30px;
        border-bottom: 1px solid var(--border-color);
        background-color: var(--surface-color);
        font-size: 11px;
        color: var(--text-secondary);
        line-height: 30px;
        flex-shrink: 0;
      }

      .col-list {
        width: 300px;
        padding-left: 15px;
        border-right: 1px solid var(--border-color);
        flex-shrink: 0;
        z-index: 5;
        background-color: var(--surface-color);
        box-sizing: border-box;
        /* Match row-list */
      }

      .col-timeline {
        flex: 1;
        position: relative;
        overflow: hidden;
        min-width: calc(100vw - 300px);
      }

      .timeline-ruler {
        position: relative;
        top: 0;
        left: 0;
        height: 100%;
        pointer-events: none;
      }

      .tick {
        position: absolute;
        top: 0;
        bottom: 0;
        border-left: 1px solid #30363d;
        font-size: 10px;
        color: #484f58;
        padding-left: 4px;
      }

      .trace-rows {
        flex: 1;
        overflow: auto;
        /* Ensure both scrollbars appear */
        position: relative;
        contain: strict;
      }

      .virtual-spacer {
        position: absolute;
        top: 0;
        left: 0;
        width: 1px;
      }

      .virtual-content {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
      }

      .trace-row {
        display: flex;
        height: 28px;
        /* align-items: center;  Removed to allow children to stretch */
        cursor: pointer;
        /* border-bottom: 1px solid #1c2128; Moved to children */
        width: fit-content;
        min-width: 100%;
        transition: background-color 0.1s ease;
        box-sizing: border-box;
      }

      .trace-row:hover {
        background-color: #1c2128;
      }

      .trace-row.selected {
        background-color: rgba(88, 166, 255, 0.1);
      }

      .trace-row.hidden {
        display: none;
      }

      .trace-row:hover * {
        background-color: #1c2128;
      }

      .trace-row.selected * {
        background-color: #1c2333;
      }

      .row-list {
        width: 300px;
        padding-left: 15px;
        /* Use box-shadow for sticky border to prevent it from disappearing */
        box-shadow: 1px 0 0 0 var(--border-color);
        border-right: none;
        border-bottom: 1px solid #1c2128;
        /* Added border here */
        display: flex;
        align-items: center;
        overflow: hidden;
        flex-shrink: 0;
        box-sizing: border-box;
        position: sticky;
        left: 0;
        background-color: var(--bg-color);
        z-index: 2;
        transition: background-color 0.1s ease;
        height: 100%;
      }

      .row-timeline {
        flex: 1;
        position: relative;
        height: 100%;
        overflow: hidden;
        border-bottom: 1px solid #1c2128;
        /* Added border here */
        box-sizing: border-box;
        /* Ensure border is inside height */
      }

      .type-icon {
        width: 16px;
        height: 16px;
        margin-right: 8px;
        flex-shrink: 0;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }

      .remote-name {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: var(--text-primary);
        font-size: 12px;
      }

      .timeline-marker {
        position: absolute;
        top: 10px;
        height: 8px;
        min-width: 4px;
        border-radius: 4px;
        opacity: 0.9;
      }

      .timeline-marker.incoming {
        background: linear-gradient(90deg, var(--accent-green), #2ea043);
      }

      .timeline-marker.outgoing {
        background: linear-gradient(90deg, var(--accent-orange), #b08800);
      }

      /* Right Panel: Details */
      .details-panel {
        width: 0;
        opacity: 0;
        background-color: var(--bg-color);
        border-left: 0 solid var(--border-color);
        display: flex;
        flex-direction: column;
        padding: 0;
        box-sizing: border-box;
        overflow-y: auto;
        overflow-x: hidden;
        position: relative;
        flex-shrink: 0;
        transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease,
          padding 0.3s ease;
      }

      .details-panel.visible {
        width: 450px;
        opacity: 1;
        padding: 20px;
        border-left: 1px solid var(--border-color);
      }

      /* Header */
      .details-header-top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .details-title-group {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .details-icon-large {
        width: 32px;
        height: 32px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }

      .details-name-large {
        font-size: 20px;
        font-weight: 600;
        color: #fff;
      }

      .details-actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .close-btn {
        cursor: pointer;
        color: var(--text-secondary);
        font-size: 20px;
        transition: color 0.2s ease;
        line-height: 1;
      }

      .close-btn:hover {
        color: #fff;
      }

      /* Unified Badge Style */
      .badge-pill {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        border: 1px solid;
        letter-spacing: 0.5px;
        white-space: nowrap;
      }

      .badge-pill.incoming {
        color: var(--accent-green);
        border-color: var(--accent-green);
      }

      .badge-pill.outgoing {
        color: var(--accent-orange);
        border-color: var(--accent-orange);
      }

      .badge-pill.executor {
        color: var(--accent-green);
        border-color: var(--accent-green);
      }

      .badge-pill.actor {
        color: var(--accent-red);
        border-color: var(--accent-red);
        background: repeating-linear-gradient(
          45deg,
          transparent,
          transparent 2px,
          rgba(255, 123, 114, 0.1) 2px,
          rgba(255, 123, 114, 0.1) 4px
        );
      }

      .details-path-row {
        color: var(--text-secondary);
        font-size: 12px;
        margin-bottom: 20px;
        font-family: monospace;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        height: 1.2em;
      }

      .remote-path-copy {
        cursor: pointer;
        color: var(--text-secondary);
        font-size: 12px;
        font-weight: normal;
        transition: color 0.2s ease;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: block;
        width: 25%;
      }

      .remote-path-copy:hover {
        color: var(--accent-blue);
      }

      /* Info Grid 2 */
      .info-grid-2 {
        display: flex;
        gap: 20px;
        margin-bottom: 25px;
      }

      .info-item-2 h4 {
        margin: 0 0 6px 0;
        color: var(--text-secondary);
        font-size: 12px;
        font-weight: normal;
      }

      .info-item-2 div {
        font-size: 11px;
        color: var(--text-primary);
        font-family: monospace;
      }

      /* Info Grid */
      .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 25px;
      }

      .info-item h4 {
        margin: 0 0 6px 0;
        color: var(--text-secondary);
        font-size: 12px;
        font-weight: normal;
      }

      .info-item div {
        font-size: 14px;
        color: var(--text-primary);
        font-family: monospace;
      }

      .clickable-path {
        border-bottom: 1px dashed var(--text-secondary);
        cursor: pointer;
        transition: color 0.2s, border-color 0.2s;
      }

      .clickable-path:hover {
        color: var(--accent-blue);
        border-color: var(--accent-blue);
      }

      /* Content Boxes */
      .content-box {
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        position: relative;
        background-color: rgba(22, 27, 34, 0.5);
      }

      .box-title {
        position: absolute;
        top: -10px;
        left: 10px;
        background-color: var(--bg-color);
        padding: 0 5px;
        font-size: 11px;
        color: var(--text-secondary);
      }

      .caller-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
      }

      .caller-icon {
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .caller-icon svg {
        width: 24px;
        height: 24px;
      }

      .caller-info {
        flex: 1;
        min-width: 0;
        /* Critical for flex child truncation */
      }

      .caller-name {
        color: var(--accent-blue);
        font-family: monospace;
        font-size: 14px;
        margin-bottom: 2px;
      }

      .caller-source {
        color: var(--text-secondary);
        font-size: 11px;
        font-family: monospace;
        height: 1.2em;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: block;
      }

      .flags-row {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        align-items: center;
      }

      .origin-row {
        font-size: 12px;
        color: var(--text-primary);
        font-family: monospace;
        display: block;
        white-space: nowrap;
        height: 1.2em;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 35%;
      }

      /* Arguments */
      .args-content {
        font-family: "Consolas", "Monaco", monospace;
        font-size: 12px;
        white-space: pre-wrap;
        overflow-x: auto;
        color: #e0e0e0;
        max-height: 300px;
        overflow-y: auto;
        line-height: 1.5;
      }

      /* Copy Button with Animation */
      .copy-icon-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: transparent;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        color: var(--text-secondary);
        cursor: pointer;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        overflow: hidden;
        /* Ensure check icon doesn't spill out */
      }

      .copy-icon-btn:hover {
        border-color: var(--text-primary);
        color: var(--text-primary);
        background-color: var(--surface-color);
      }

      .copy-icon-btn svg {
        width: 14px;
        height: 14px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(1);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .copy-icon-btn .icon-check {
        transform: translate(-50%, -50%) scale(0);
        color: var(--accent-green);
      }

      .copy-icon-btn.copied .icon-copy {
        transform: translate(-50%, -50%) scale(0);
      }

      .copy-icon-btn.copied .icon-check {
        transform: translate(-50%, -50%) scale(1);
      }

      /* Dropdown */
      .dropdown-menu {
        position: absolute;
        top: 42px;
        /* Button height + spacing */
        right: 10px;
        background-color: #1c2128;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        width: 160px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        z-index: 50;
        display: none;
        overflow: hidden;
      }

      .dropdown-menu.visible {
        display: block;
      }

      .dropdown-item {
        padding: 8px 12px;
        font-size: 12px;
        color: var(--text-primary);
        cursor: pointer;
        transition: background-color 0.2s;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .dropdown-item:hover {
        background-color: var(--accent-blue);
        color: #fff;
      }

      .dropdown-item svg {
        width: 14px;
        height: 14px;
        opacity: 0.7;
      }

      /* Toast Notification */
      .toast-container {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(20px);
        background-color: #1c2128;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        padding: 8px 16px;
        color: #fff;
        font-size: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        opacity: 0;
        transition: opacity 0.3s, transform 0.3s;
        pointer-events: none;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .toast-container.visible {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      .toast-container svg {
        width: 16px;
        height: 16px;
        color: var(--accent-green);
      }

      /* Syntax Highlighting */
      .hl-str {
        color: #a5d6ff;
      }

      .hl-num {
        color: #79c0ff;
      }

      .hl-bool {
        color: #ff7b72;
      }

      .hl-key {
        color: #7ee787;
      }

      .hl-nil {
        color: #ff7b72;
      }

      .footer {
        height: 25px;
        border-top: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        background-color: var(--bg-color);
        color: var(--text-secondary);
        font-size: 11px;
        flex-shrink: 0;
      }
    </style>
  </head>

  <body>
    <div class="app-header">
      <a
        href="https://github.com/notpoiu/cobalt/tree/main"
        target="_blank"
        style="text-decoration: none"
      >
        <div class="brand">
          <div class="brand-icon"></div>
          Cobalt - Session Viewer
        </div>
      </a>
      <div class="session-container">
        <div class="session-info">
          Session / <span class="session-id">59d33398-0e82-42dd-b1f5-d783c790306b</span>
        </div>
        <div class="session-tooltip">
          <div class="tooltip-row">
            <span class="tooltip-label">Start Time (tick)</span>
            <span class="tooltip-value">1769817688.1462214</span>
          </div>
          <div class="tooltip-row">
            <span class="tooltip-label">Place ID</span>
            <span class="tooltip-value">126509999114328</span>
          </div>
          <div class="tooltip-row">
            <span class="tooltip-label">Job ID</span>
            <span class="tooltip-value">c6c04206-7131-4548-96cd-9dd8c06a9c8e</span>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <!-- LEFT PANEL WRAPPER -->
      <div
        class="left-panel-wrapper"
        style="
          flex: 1;
          display: flex;
          flex-direction: column;
          border-right: 1px solid var(--border-color);
          min-width: 0;
          overflow: hidden;
        "
      >
        <!-- SHARED TOOLBAR -->
        <div class="trace-toolbar">
          <div
            style="
              font-size: 11px;
              color: var(--text-secondary);
              margin-right: 20px;
            "
          >
            Started: 31 Jan 2026, 07:01:28
          </div>
          <div style="flex: 1"></div>
          <div class="view-toggle">
            <button class="view-btn active" onclick="switchView('timeline')">
              Timeline
            </button>
            <button class="view-btn" onclick="switchView('heatmap')">
              Heatmap
            </button>
          </div>
          <div class="divider"></div>
          <div class="search-widget">
            <div class="search-row">
              <div
                class="search-chevron"
                onclick="toggleSearchOptions()"
                id="searchChevron"
              >
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="currentColor"
                >
                  <path
                    d="M6 4l4 4-4 4"
                    stroke="currentColor"
                    stroke-width="1.5"
                    fill="none"
                  />
                </svg>
              </div>
              <div class="search-input-container">
                <input
                  type="text"
                  class="search-input"
                  id="filterInput"
                  placeholder="Filter events..."
                  oninput="handleFilterInput()"
                />
              </div>
            </div>
            <div class="search-options" id="searchOptions">
              <div class="time-range-row">
                <span>Time Range:</span>
                <input
                  type="number"
                  class="time-input-styled"
                  id="minTimeInput"
                  placeholder="Start"
                  oninput="handleTimeInput()"
                />
                <span>-</span>
                <input
                  type="number"
                  class="time-input-styled"
                  id="maxTimeInput"
                  placeholder="End"
                  oninput="handleTimeInput()"
                />
                <select
                  class="unit-select"
                  id="timeUnitSelect"
                  onchange="handleTimeInput()"
                >
                  <option value="1">s</option>
                  <option value="0.001">ms</option>
                </select>
              </div>
              <div class="filter-options-row">
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterIncoming"
                    onchange="handleFilterInput()"
                  />
                  Incoming</label
                >
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterOutgoing"
                    onchange="handleFilterInput()"
                  />
                  Outgoing</label
                >
                <div
                  style="
                    width: 1px;
                    height: 14px;
                    background: var(--border-color);
                    margin: 0 4px;
                  "
                ></div>
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterActor"
                    onchange="handleFilterInput()"
                  />
                  Actor</label
                >
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterNonActor"
                    onchange="handleFilterInput()"
                  />
                  Non-Actor</label
                >
                <div
                  style="
                    width: 1px;
                    height: 14px;
                    background: var(--border-color);
                    margin: 0 4px;
                  "
                ></div>
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterArgs"
                    onchange="handleFilterInput()"
                  />
                  Args</label
                >
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterProto"
                    onchange="handleFilterInput()"
                  />
                  Proto</label
                >
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterConst"
                    onchange="handleFilterInput()"
                  />
                  Const</label
                >
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterHash"
                    onchange="handleFilterInput()"
                  />
                  Hash</label
                >
                <label class="filter-checkbox-label"
                  ><input
                    type="checkbox"
                    class="filter-checkbox"
                    id="filterSource"
                    onchange="handleFilterInput()"
                  />
                  Source</label
                >
              </div>
            </div>
          </div>
        </div>

        <!-- TIMELINE VIEW -->
        <div class="trace-panel" id="timelinePanel" style="border-right: none">
          <div class="trace-header-row">
            <div class="col-list">Remote</div>
            <div class="col-timeline" id="timelineHeader">
              <div class="timeline-ruler" id="ruler"></div>
            </div>
          </div>

          <div class="trace-rows" id="rowsContainer">
            <div id="virtualSpacer" class="virtual-spacer"></div>
            <div id="virtualContent" class="virtual-content"></div>
          </div>
        </div>

        <!-- HEATMAP VIEW -->
        <div class="heatmap-container" id="heatmapPanel">
          <div
            id="heatmapScroll"
            style="
              width: 100%;
              height: 100%;
              overflow-x: auto;
              overflow-y: hidden;
              position: relative;
            "
          >
            <div
              id="heatmapSpacer"
              style="
                height: 1px;
                width: 100%;
                position: absolute;
                top: 0;
                left: 0;
                pointer-events: none;
              "
            ></div>
            <canvas
              id="heatmapCanvas"
              class="heatmap-canvas"
              style="
                position: sticky;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
              "
            ></canvas>
          </div>
          <div
            id="heatmapTooltip"
            class="heatmap-tooltip"
            style="
              display: none;
              position: absolute;
              background: #1c2128;
              border: 1px solid #30363d;
              padding: 4px 8px;
              border-radius: 4px;
              font-size: 11px;
              color: #c9d1d9;
              pointer-events: none;
              z-index: 100;
            "
          ></div>
        </div>
      </div>

      <!-- RIGHT PANEL -->
      <div class="details-panel" id="detailsPanel">
        <div id="detailsContent"></div>
      </div>
    </div>

    <div class="footer">
      <div>Ended: 31 Jan 2026, 07:02:23</div>
      <span
        id="statsLabel"
        style="
          color: var(--text-secondary);
          font-size: 11px;
          margin-right: 10px;
        "
      >
        214 Events â€¢ 55.59s
      </span>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast-container">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-check"
      >
        <path d="M20 6 9 17l-5-5" />
      </svg>
      <span id="toastMessage">Copied to clipboard</span>
    </div>

    <!-- Data Script -->
    <script type="application/json" id="dictionary-data">
      {"53":"b59863074110ef6cd2de5475fedf7c990f74608bb25511ed9dd4242b01c20b1d66d38346deaa396d7bd4df562a909adc","43":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"11_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -6.3927870996849e-08, -0.16176606714725, -5.7406182918385e-08, 1, -4.4989537428819e-08, 0.16176606714725, -3.5110616636302e-08, -0.98682916164398)\n}","73":"{\n    workspace.Items:GetChildren()[215]\n}","63":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"20_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, -3.803712189665e-08, 0.55849331617355, -7.0088610470975e-09, 1, 7.851667049863e-08, -0.55849331617355, -6.9044688189024e-08, 0.82950901985168)\n}","47":"game:GetService(\"ReplicatedStorage\").RemoteEvents.DestroyObject","37":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"5_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -4.5810914173217e-08, -0.16176606714725, -4.0441594961749e-08, 1, -3.6484614440724e-08, 0.16176606714725, -2.9462004391689e-08, -0.98682916164398)\n}","67":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"24_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, 4.175659640282e-08, 0.55849331617355, 7.6953128314017e-09, 1, -8.619606717275e-08, -0.55849331617355, 7.5798197940458e-08, 0.82950901985168)\n}","57":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"14_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, -3.5748566773464e-08, 0.55849331617355, -6.7805321357639e-09, 1, 7.4079814282868e-08, -0.55849331617355, -6.5236754664966e-08, 0.82950901985168)\n}","112":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"37_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -4.2749100259698e-08, -0.55079025030136, 2.845027269327e-10, 1, -7.8045239604307e-08, 0.55079025030136, -6.5296667628445e-08, -0.83464372158051)\n}","115":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464348316193, 0, -0.55079132318497, 0, 1, 0, 0.55079132318497, 0, -0.83464348316193)\n}","111":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"36_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -1.7483404946006e-08, -0.55079025030136, 1.1632762808578e-10, 1, -3.191867747887e-08, 0.55079025030136, -2.6704796596277e-08, -0.83464372158051)\n}","116":"{\n    .Sapling --[[Nil Parent]],\n    Vector3.new(-13.880523681641, 1.8689422607422, 110.42868041992)\n}","114":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"39_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -3.7712137412882e-08, -0.55079025030136, 2.5134733183663e-10, 1, -6.8850027901135e-08, 0.55079025030136, -5.7603681824503e-08, -0.83464372158051)\n}","113":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"38_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, 4.7279318238225e-08, -0.55079025030136, -3.1488803231561e-10, 1, 8.6316227054795e-08, 0.55079025030136, 7.2216735702568e-08, -0.83464372158051)\n}","27":"28ccf5f06f59ba459c891ec5d49a7d4cdac18016b0ffaab2d94d092be58c8608b94406d41acb4a0f1e738db424534b8b","17":"{\n    \"BindableEvent\",\n    \"Fire\",\n    \"RemoteEvent\",\n    \"rawget\",\n    [6] = \"FireAllClients\",\n    [7] = \"FireServer\",\n    [8] = \"warn\",\n    [10] = \"Remote event does not exist for event\",\n    [11] = \"Name\"\n}","13":"game:GetService(\"ReplicatedStorage\").RemoteEvents.UnequipItemHandle","110":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"35_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, 2.1458115284645e-08, -0.55079025030136, -1.4264477099513e-10, 1, 3.9174935295705e-08, 0.55079025030136, 3.2775680836039e-08, -0.83464372158051)\n}","33":"{\n    {\n        Success = true\n    }\n}","23":"RemoteFunction","42":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"10_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -6.1045952293171e-08, -0.16176606714725, -5.4707566476964e-08, 1, -4.3636646296363e-08, 0.16176606714725, -3.4212085608942e-08, -0.98682916164398)\n}","52":"Unknown","62":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"19_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, -2.4118458341604e-08, 0.55849331617355, -4.4440886526331e-09, 1, 4.9785501943234e-08, -0.55849331617355, -4.3779515124243e-08, 0.82950901985168)\n}","72":"game:GetService(\"ReplicatedStorage\").RemoteEvents.RequestStartDraggingItem","36":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"4_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -4.1674137918335e-08, -0.16176606714725, -3.6567946892774e-08, 1, -3.4542619431477e-08, 0.16176606714725, -2.8172211230526e-08, -0.98682916164398)\n}","46":"DestroyObject","56":"game:GetService(\"Players\").LocalPlayer.PlayerScripts.Client.InteractionHandler","66":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"23_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, -3.3633785534448e-08, 0.55849331617355, -6.1981593191263e-09, 1, 6.9428253368642e-08, -0.55849331617355, -6.1052993771682e-08, 0.82950901985168)\n}","109":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"34_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -3.3813410738048e-08, -0.55079025030136, 2.2457709303314e-10, 1, -6.1731036282708e-08, 0.55079025030136, -5.1647116805498e-08, -0.83464372158051)\n}","106":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"31_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -5.0365645876127e-08, -0.55079025030136, 3.3383087960637e-10, 1, -9.1948386682361e-08, 0.55079025030136, -7.6928017733735e-08, -0.83464372158051)\n}","100":"game:GetService(\"ReplicatedStorage\").RemoteEvents.RequestPlantItem","107":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"32_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -5.0620108105193e-09, -0.55079025030136, 3.3546474625945e-11, 1, -9.2412859586943e-09, 0.55079025030136, -7.7316579805142e-09, -0.83464372158051)\n}","80":"game:GetService(\"ReplicatedStorage\").RemoteEvents.StopDraggingItem","9":"2e33b996824b2fa3923c77a5e8d7e0ce572468b10fcae6dbdd067adefca34b8ccf4a463fada516b603dab7564d4427c8","103":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"28_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, 5.778651779309e-09, -0.55079025030136, -8.8523871566437e-10, 1, 1.1833017232732e-08, 0.55079025030136, 1.0363934599411e-08, -0.83464372158051)\n}","102":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"27_8401342884\",\n    CFrame.new(-1.8957080841064, 4.8685064315796, 105.64886474609, -0.83464342355728, 3.4783588489518e-05, -0.55079066753387, -1.7535332517582e-05, 1, 8.9724351710174e-05, 0.55079066753387, 8.4546139987651e-05, -0.83464342355728)\n}","76":"RequestBagStoreItem","108":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"33_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, 4.6992209234986e-08, -0.55079025030136, -3.1181227044819e-10, 1, 8.5790304638067e-08, 0.55079025030136, 7.1776078414132e-08, -0.83464372158051)\n}","90":"game:GetService(\"ReplicatedStorage\").RemoteEvents.RequestBagDropItem","83":"{\n    workspace.Items:GetChildren()[210]\n}","97":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    workspace.Items:GetChildren()[210],\n    false\n}","96":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    workspace.Items:GetChildren()[209],\n    false\n}","95":"{\n    0,\n    60\n}","94":"game:GetService(\"ReplicatedStorage\").RemoteEvents.AnalyticsTimeFirstPerson","93":"AnalyticsTimeFirstPerson","92":"{\n    \"FireAllClients\",\n    \"BagDrop\",\n    {\n        Instance = game:GetService(\"Players\").LocalPlayer.Character.Head,\n        Volume = 0.25\n    }\n}","16":"{\n    game:GetService(\"Players\").LocalPlayer\n}","26":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"1_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -2.8998258017054e-08, -0.16176606714725, -2.469834825547e-08, 1, -2.8591955469892e-08, 0.16176606714725, -2.4220021543897e-08, -0.98682916164398)\n}","91":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    .Sapling --[[Nil Parent]],\n    false\n}","12":"UnequipItemHandle","22":"ToolDamageObject","32":"OnClientInvoke","71":"RequestStartDraggingItem","61":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"18_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, 3.3950549038764e-09, 0.55849331617355, 6.2554550428473e-10, 1, -7.0080528047356e-09, -0.55849331617355, 6.1626059810749e-09, 0.82950901985168)\n}","51":"Anonymous","41":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"9_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -5.7990291679744e-08, -0.16176606714725, -5.184627127619e-08, 1, -4.2202181305129e-08, 0.16176606714725, -3.3259372145267e-08, -0.98682916164398)\n}","65":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"22_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, -8.4641502695604e-09, 0.55849331617355, -1.5598131675176e-09, 1, 1.747206113123e-08, -0.55849331617355, -1.5364378214144e-08, 0.82950901985168)\n}","55":"{\n    \"BindableEvent\",\n    \"Fire\"\n}","45":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"13_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -6.9376433486923e-08, -0.16176606714725, -6.2508171083664e-08, 1, -4.754733140544e-08, 0.16176606714725, -3.6809389314385e-08, -0.98682916164398)\n}","35":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"3_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -3.7564333865703e-08, -0.16176606714725, -3.2719558618055e-08, 1, -3.261327563564e-08, 0.16176606714725, -2.6890816684499e-08, -0.98682916164398)\n}","59":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"16_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, 3.9116741845646e-08, 0.55849331617355, 7.2111139282072e-09, 1, -8.0750162112508e-08, -0.55849331617355, 7.1010347824085e-08, 0.82950901985168)\n}","49":"game:GetService(\"Players\").LocalPlayer.PlayerScripts.Client.UtilityModules.Events","39":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"7_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -5.2011074558322e-08, -0.16176606714725, -4.6247375706798e-08, 1, -3.939527104535e-08, 0.16176606714725, -3.1395146038449e-08, -0.98682916164398)\n}","29":"RequestReplicateSound","99":"RequestPlantItem","89":"RequestBagDropItem","79":"StopDraggingItem","69":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"26_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, -3.9781575367215e-08, 0.55849331617355, -7.3322055094138e-09, 1, 8.212042246214e-08, -0.55849331617355, -7.2214618285216e-08, 0.82950901985168)\n}","1":"EquipItemHandle","84":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    workspace.Items:GetChildren()[210]\n}","3":"game:GetService(\"ReplicatedStorage\").RemoteEvents.EquipItemHandle","2":"RemoteEvent","19":"PlayEnemyHitSound","4":"FireServer","7":"FireOtherClients","6":"{\n    \"FireAllClients\",\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"]\n}","25":"InvokeServer","15":"f19ad1fd75b8e83da90012e26252d020d7fbc9767d26e895a9c605c57c35b8fdd14a730ce0adf6fcd7998351b58a1fea","87":"{\n    .Sapling --[[Nil Parent]]\n}","86":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    workspace.Items:GetChildren()[209]\n}","31":"{\n    \"FireAllClients\",\n    \"WoodChop\",\n    {\n        Instance = game:GetService(\"Players\").LocalPlayer.Character.Head,\n        Volume = 0.4\n    }\n}","21":"{\n    \"FireAllClients\",\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"]\n}","11":"{\n    \"RemoteEvent\",\n    \"rawget\",\n    [4] = \"FireAllClients\",\n    [5] = \"FireServer\",\n    [6] = \"warn\",\n    [8] = \"Remote event does not exist for event\",\n    [9] = \"Name\"\n}","85":"{\n    workspace.Items:GetChildren()[209]\n}","60":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"17_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, 2.2089901463573e-08, 0.55849331617355, 4.070384918009e-09, 1, -4.5598255837831e-08, -0.55849331617355, 4.0097447140397e-08, 0.82950901985168)\n}","70":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82949042320251, 0, 0.55852097272873, 0, 1, 0, -0.55852097272873, 0, 0.82949042320251)\n}","40":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"8_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -5.4943811278463e-08, -0.16176606714725, -4.8993566537092e-08, 1, -4.0772025755587e-08, 0.16176606714725, -3.230952572153e-08, -0.98682916164398)\n}","50":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98683214187622, 0, -0.16175028681755, 0, 1, 0, 0.16175028681755, 0, -0.98683214187622)\n}","54":"{\n    {\n        RemoteEvent = game:GetService(\"ReplicatedStorage\").RemoteEvents.DestroyObject,\n        BindableEvent = {\n            BindableEvent = .Event --[[Nil Parent]]\n        },\n        Name = \"DestroyObject\"\n    }\n}","64":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"21_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, 4.4665917187103e-08, 0.55849331617355, 8.2306081949923e-09, 1, -9.2200352241889e-08, -0.55849331617355, 8.1077764946258e-08, 0.82950901985168)\n}","34":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"2_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -3.3665219945078e-08, -0.16176606714725, -2.9068454310277e-08, 1, -3.0782846494048e-08, 0.16176606714725, -2.5675120696178e-08, -0.98682916164398)\n}","44":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"12_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -6.6732049219809e-08, -0.16176606714725, -6.0031993598386e-08, 1, -4.6305935086366e-08, 0.16176606714725, -3.5984907498232e-08, -0.98682916164398)\n}","48":"OnClientEvent","58":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"15_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, -4.4931666720593e-10, 0.55849331617355, -9.7077020033698e-11, 1, 9.4870056255303e-10, -0.55849331617355, -8.4117257603822e-10, 0.82950901985168)\n}","28":"{\n    \"RemoteFunction\",\n    \"rawget\",\n    [4] = \"InvokeServer\",\n    [5] = \"warn\",\n    [7] = \"Remote function does not exist for event\",\n    [8] = \"Name\"\n}","38":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"6_8401342884\",\n    CFrame.new(-45.808616638184, 3.9872081279755, 44.872219085693, -0.98682916164398, -4.9002185420477e-08, -0.16176606714725, -4.342987125483e-08, 1, -3.7982765377365e-08, 0.16176606714725, -3.0457020017138e-08, -0.98682916164398)\n}","88":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    .Sapling --[[Nil Parent]]\n}","98":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    workspace.Items:GetChildren()[215],\n    true\n}","68":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"25_8401342884\",\n    CFrame.new(-67.859580993652, 5.2410740852356, 38.316520690918, 0.82950901985168, 4.9393005241427e-08, 0.55849331617355, 9.1033154347997e-09, 1, -1.019605520014e-07, -0.55849331617355, 8.9661341462488e-08, 0.82950901985168)\n}","78":"{\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"],\n    workspace.Items:GetChildren()[215]\n}","82":"{\n    \"FireAllClients\",\n    \"BagGet\",\n    {\n        Instance = game:GetService(\"Players\").LocalPlayer.Character.Head,\n        Volume = 0.25\n    }\n}","81":"{\n    {\n        Success = true,\n        Cooked = false\n    }\n}","105":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"30_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -2.4910548290791e-08, -0.55079025030136, 1.6624085441563e-10, 1, -4.5478838472945e-08, 0.55079025030136, -3.8050188777561e-08, -0.83464372158051)\n}","77":"game:GetService(\"ReplicatedStorage\").RemoteEvents.RequestBagStoreItem","101":"{\n    .Sapling --[[Nil Parent]],\n    Vector3.new(-55.398147583008, 0.98720836639404, 52.199851989746)\n}","18":"{\n    \"FireAllClients\",\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Sack\"]\n}","75":"{\n    \"RemoteEvent\",\n    \"rawget\",\n    [4] = \"FireServer\",\n    [5] = \"warn\",\n    [7] = \"Remote event does not exist for event\",\n    [8] = \"Name\"\n}","74":"1b2d4949afd8b607ac99af47c0cdec21e269b700bc232c79b3f29be40caf0ed317939211a160381d98d50756ad4d9a57","14":"FireAllClients","24":"game:GetService(\"ReplicatedStorage\").RemoteEvents.ToolDamageObject","5":"game:GetService(\"Players\").LocalPlayer.PlayerScripts.LoadClient","104":"{\n    [\"Small Tree\"] --[[Nil Parent]],\n    game:GetService(\"Players\").LocalPlayer.Inventory[\"Old Axe\"],\n    \"29_8401342884\",\n    CFrame.new(-1.8957077264786, 4.868941783905, 105.64886474609, -0.83464372158051, -4.8744286829105e-08, -0.55079025030136, 4.9392040457619e-10, 1, -8.9247286894079e-08, 0.55079025030136, -7.4761736357232e-08, -0.83464372158051)\n}","20":"game:GetService(\"ReplicatedStorage\").RemoteEvents.PlayEnemyHitSound","30":"game:GetService(\"ReplicatedStorage\").RemoteEvents.RequestReplicateSound","8":"Players.nsopnet.PlayerScripts.Client.UtilityModules.Events","10":"{}"}
    </script>
    <script type="application/json" id="event-data">
      [[1,2,3,4,1769817691.88255,5,6,4,7,91,8,0,0,9,10,10,11],[12,2,13,4,1769817693.5811585,5,6,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817694.0253983,5,6,4,7,91,8,0,0,9,10,10,11],[12,2,13,4,1769817694.401985,5,6,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817694.768648,5,6,4,7,91,8,0,0,9,10,10,11],[1,2,3,4,1769817695.5397425,5,18,4,7,91,8,0,0,9,10,10,11],[12,2,13,4,1769817695.9833756,5,18,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817696.4577599,5,6,4,7,91,8,0,0,9,10,10,11],[12,2,13,4,1769817696.8596686,5,6,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817697.234348,5,6,4,7,91,8,0,0,9,10,10,11],[19,2,20,4,1769817698.1407757,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817698.1414717,5,26,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817698.1418317,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817698.2122367,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817698.8066962,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817698.8071368,5,34,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817698.8075324,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817698.8682616,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817699.3831566,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817699.3837045,5,35,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817699.384255,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817699.4582365,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817700.0061806,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817700.006467,5,36,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817700.006727,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817700.0686696,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817700.6569203,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817700.657178,5,37,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817700.6574305,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817700.7188824,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817701.1730796,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817701.173299,5,38,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817701.1734925,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817701.2347346,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817701.6764923,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817701.6768566,5,39,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817701.6771303,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817701.7384225,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817702.172681,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817702.1729503,5,40,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817702.173189,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817702.2379006,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817702.7070952,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817702.7072623,5,41,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817702.7074238,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817702.7853513,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817703.254718,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817703.2550605,5,42,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817703.2552589,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817703.3183618,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817703.789603,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817703.790113,5,43,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817703.7906023,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817703.8518894,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817704.3211418,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817704.3220158,5,44,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817704.322282,5,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817704.3854509,5,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817704.8405278,5,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817704.8408104,5,45,25,25,83,8,0,0,27,10,10,28],[22,23,24,32,1769817704.8933206,5,33,32,25,83,8,0,0,27,10,10,28],[46,2,47,48,1769817705.1061819,49,50,48,51,-1,52,0,0,53,54,10,55],[12,2,13,4,1769817708.0573264,5,6,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817708.6119903,5,6,4,7,91,8,0,0,9,10,10,11],[19,2,20,4,1769817711.1571277,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817711.1574424,56,57,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817711.1577056,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817711.235505,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817711.689652,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817711.6898866,56,58,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817711.6901,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817711.7349926,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817712.1918424,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817712.1928828,56,59,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817712.1935709,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817712.2616082,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817712.6906796,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817712.690935,56,60,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817712.691167,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817712.76838,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817713.19041,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817713.1907254,56,61,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817713.1910289,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817713.251903,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817713.708437,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817713.708798,56,62,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817713.7091315,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817713.7698506,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817714.2245169,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817714.2250615,56,63,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817714.2255812,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817714.30272,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817714.739558,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817714.7398597,56,64,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817714.7401999,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817714.803595,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817715.244291,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817715.2446085,56,65,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817715.2449487,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817715.30257,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817715.7561815,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817715.7565523,56,66,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817715.756888,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817715.8175705,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817716.2971788,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817716.2974585,56,67,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817716.2977269,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817716.354858,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817717.1707752,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817717.1710814,56,68,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817717.1713753,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817717.2344945,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817717.7230876,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817717.7234195,56,69,25,25,83,8,0,0,27,10,10,28],[22,23,24,32,1769817717.7707885,56,33,32,25,83,8,0,0,27,10,10,28],[46,2,47,48,1769817717.985272,49,70,48,51,-1,52,0,0,53,54,10,55],[12,2,13,4,1769817724.3392869,5,6,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817726.3945854,5,6,4,7,91,8,0,0,9,10,10,11],[12,2,13,4,1769817727.0231293,5,6,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817727.3335868,5,18,4,7,91,8,0,0,9,10,10,11],[71,2,72,4,1769817727.8294414,56,73,4,4,75,8,0,0,74,10,10,75],[76,23,77,25,1769817728.442898,5,78,25,25,83,8,0,0,27,10,10,28],[79,2,80,4,1769817728.45609,56,73,4,4,75,8,0,0,74,10,10,75],[76,23,77,32,1769817728.5348118,5,81,32,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817728.5353733,5,82,4,7,91,8,0,0,9,10,10,11],[71,2,72,4,1769817729.0119603,56,83,4,4,75,8,0,0,74,10,10,75],[76,23,77,25,1769817729.5409523,5,84,25,25,83,8,0,0,27,10,10,28],[79,2,80,4,1769817729.5540844,56,83,4,4,75,8,0,0,74,10,10,75],[76,23,77,32,1769817729.6218377,5,81,32,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817729.622186,5,82,4,7,91,8,0,0,9,10,10,11],[71,2,72,4,1769817730.1591845,56,85,4,4,75,8,0,0,74,10,10,75],[76,23,77,25,1769817730.6593488,5,86,25,25,83,8,0,0,27,10,10,28],[79,2,80,4,1769817730.674015,56,85,4,4,75,8,0,0,74,10,10,75],[76,23,77,32,1769817730.7343386,5,81,32,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817730.7346132,5,82,4,7,91,8,0,0,9,10,10,11],[71,2,72,4,1769817731.274098,56,87,4,4,75,8,0,0,74,10,10,75],[76,23,77,25,1769817732.1729639,5,88,25,25,83,8,0,0,27,10,10,28],[79,2,80,4,1769817732.1857243,56,87,4,4,75,8,0,0,74,10,10,75],[76,23,77,32,1769817732.2565017,5,81,32,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817732.2569628,5,82,4,7,91,8,0,0,9,10,10,11],[89,2,90,4,1769817734.8245075,5,91,4,4,75,8,0,0,74,10,10,75],[29,2,30,4,1769817734.8246954,5,92,4,7,91,8,0,0,9,10,10,11],[93,2,94,4,1769817735.7426964,5,95,4,4,75,8,0,0,74,10,10,75],[89,2,90,4,1769817736.1383317,5,96,4,4,75,8,0,0,74,10,10,75],[29,2,30,4,1769817736.1386624,5,92,4,7,91,8,0,0,9,10,10,11],[89,2,90,4,1769817736.8409603,5,97,4,4,75,8,0,0,74,10,10,75],[29,2,30,4,1769817736.841153,5,92,4,7,91,8,0,0,9,10,10,11],[89,2,90,4,1769817737.7110134,5,98,4,4,75,8,0,0,74,10,10,75],[29,2,30,4,1769817737.7112349,5,92,4,7,91,8,0,0,9,10,10,11],[71,2,72,4,1769817739.5494245,56,87,4,4,75,8,0,0,74,10,10,75],[99,23,100,25,1769817740.8741306,56,101,25,25,83,8,0,0,27,10,10,28],[79,2,80,4,1769817740.8889719,56,87,4,4,75,8,0,0,74,10,10,75],[99,23,100,32,1769817740.9708102,56,33,32,25,83,8,0,0,27,10,10,28],[12,2,13,4,1769817742.9838405,5,18,4,14,101,8,0,0,15,16,10,17],[1,2,3,4,1769817743.7329269,5,6,4,7,91,8,0,0,9,10,10,11],[19,2,20,4,1769817747.2086066,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817747.208881,56,102,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817747.2091006,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817747.3465009,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817747.7736662,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817747.7740646,56,103,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817747.774446,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817747.9012607,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817748.2920135,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817748.2923022,56,104,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817748.2925697,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817748.3675035,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817748.9495574,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817748.950147,56,105,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817748.9506946,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817749.018727,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817749.6245709,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817749.6248863,56,106,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817749.625184,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817749.6892303,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817750.122226,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817750.122909,56,107,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817750.123632,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817750.200977,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817750.6430083,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817750.643504,56,108,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817750.6440142,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817750.713591,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817751.1573289,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817751.1576672,56,109,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817751.1580017,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817751.2178148,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817751.688977,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817751.6892637,56,110,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817751.6895307,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817751.7784563,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817752.2369729,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817752.2375527,56,111,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817752.2380832,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817752.2843397,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817752.7822798,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817752.7826315,56,112,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817752.7829447,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817752.847592,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817753.3273433,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817753.3276683,56,113,25,25,83,8,0,0,27,10,10,28],[29,2,30,4,1769817753.3279923,56,31,4,7,91,8,0,0,9,10,10,11],[22,23,24,32,1769817753.4111572,56,33,32,25,83,8,0,0,27,10,10,28],[19,2,20,4,1769817753.8567618,56,21,4,14,101,8,0,0,15,16,10,17],[22,23,24,25,1769817753.8569928,56,114,25,25,83,8,0,0,27,10,10,28],[22,23,24,32,1769817753.9329119,56,33,32,25,83,8,0,0,27,10,10,28],[46,2,47,48,1769817754.1458863,49,115,48,51,-1,52,0,0,53,54,10,55],[71,2,72,4,1769817757.245629,56,87,4,4,75,8,0,0,74,10,10,75],[12,2,13,4,1769817758.9234815,5,6,4,14,101,8,0,0,15,16,10,17],[79,2,80,4,1769817760.1597093,56,87,4,4,75,8,0,0,74,10,10,75],[71,2,72,4,1769817760.8192209,56,87,4,4,75,8,0,0,74,10,10,75],[99,23,100,25,1769817761.957803,56,116,25,25,83,8,0,0,27,10,10,28],[79,2,80,4,1769817761.9713648,56,87,4,4,75,8,0,0,74,10,10,75],[99,23,100,32,1769817762.0487707,56,33,32,25,83,8,0,0,27,10,10,28]]
    </script>

    <script>
      // Data Parsing
      let startTime = 1769817688.1462214; // Seconds
      const totalDuration = 55.586705446243286;
      const dictionary = JSON.parse(document.getElementById('dictionary-data').textContent);
      const rawEvents = JSON.parse(document.getElementById('event-data').textContent);

      // Reconstruct Events
      const allEvents = rawEvents.map(e => ({
        name: dictionary[e[0]],
        className: dictionary[e[1]],
        path: dictionary[e[2]],
        type: dictionary[e[3]],
        timestamp: e[4],
        origin: dictionary[e[5]],

        args: dictionary[e[6]],
        method: dictionary[e[7]],

        funcName: dictionary[e[8]],
        funcLine: e[9],
        funcSource: dictionary[e[10]],
        isExecutor: e[11] === 1,
        isActor: e[12] === 1,

        funcHash: dictionary[e[13]],
        upvalues: dictionary[e[14]],
        protos: dictionary[e[15]],
        constants: dictionary[e[16]]
      }));

      if (allEvents.length > 0) {
        const minTimestamp = Math.min(...allEvents.map(e => e.timestamp));
        if (minTimestamp < startTime) {
          startTime = minTimestamp;
        }
      }

      // Preprocess events
      allEvents.forEach(evt => {
        evt.relTime = Math.max(0, evt.timestamp - startTime);

        const typeLower = evt.type.toLowerCase();
        const methodLower = evt.method ? evt.method.toLowerCase() : '';

        if (methodLower.includes('client') || typeLower.includes('client')) {
          evt.typeClass = 'incoming';
        } else {
          evt.typeClass = 'outgoing';
        }
      });

      // State
      let filteredEvents = allEvents;
      let zoomLevel = 1;
      let selectedEvent = null;
      let filterTimeout = null;
      let filterMinTime = 0;
      let filterMaxTime = totalDuration;

      // Initialize Time Inputs
      document.getElementById('minTimeInput').value = "0";
      document.getElementById('maxTimeInput').value = totalDuration.toFixed(2);

      // Virtual Scroll State
      let lastStartIndex = -1;
      let lastEndIndex = -1;
      let isScrolling = false;

      // DOM Elements
      const rowsContainer = document.getElementById('rowsContainer');
      const virtualSpacer = document.getElementById('virtualSpacer');
      const virtualContent = document.getElementById('virtualContent');
      const rulerContainer = document.getElementById('ruler');
      const detailsPanel = document.getElementById('detailsPanel');
      const detailsContent = document.getElementById('detailsContent');
      const timelineHeader = document.getElementById('timelineHeader');
      const statsLabel = document.getElementById('statsLabel');


      // Heatmap State
      let currentView = 'timeline';
      let heatmapZoom = 1;
      let detailsWasVisible = false;
      const heatmapCanvas = document.getElementById('heatmapCanvas');
      const heatmapTooltip = document.getElementById('heatmapTooltip');

      const timelinePanel = document.getElementById('timelinePanel');
      const heatmapPanel = document.getElementById('heatmapPanel');

      // Heatmap Interaction
      heatmapCanvas.addEventListener('wheel', (e) => {
        if (currentView !== 'heatmap') return;
        e.preventDefault();

        const delta = e.deltaY > 0 ? 1.1 : 0.9;
        heatmapZoom = Math.max(1, Math.min(50, heatmapZoom * delta));
        renderHeatmap();
      }, { passive: false });

      heatmapCanvas.addEventListener('mousemove', (e) => {
        if (currentView !== 'heatmap') return;
        const rect = heatmapCanvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        if (!window.lastHeatmapData) return;

        const { sortedRemotes, rowHeight, binWidth, remotes, maxBinCount, timeBins, binDuration, margin, scrollLeft } = window.lastHeatmapData;
        const width = heatmapPanel.clientWidth;
        const height = heatmapPanel.clientHeight;

        if (x < margin.left || x > width - margin.right || y < margin.top || y > height - margin.bottom) {
          heatmapTooltip.style.display = 'none';
          return;
        }

        const rowIndex = Math.floor((y - margin.top) / rowHeight);

        // Calculate colIndex based on virtual position (x + scrollLeft)
        const colIndex = Math.floor((x - margin.left + scrollLeft) / binWidth);

        if (rowIndex >= 0 && rowIndex < sortedRemotes.length && colIndex >= 0 && colIndex < timeBins) {
          const remote = sortedRemotes[rowIndex];
          // Calculate count for this bin
          let count = 0;
          remotes[remote].forEach(evt => {
            const binIndex = Math.min(Math.floor(evt.relTime / binDuration), timeBins - 1);
            if (binIndex === colIndex) count++;
          });

          heatmapTooltip.style.display = 'block';
          heatmapTooltip.innerHTML = `<b>${remote}</b><br>Time: ${(colIndex * binDuration).toFixed(1)}s<br>Count: ${count}`;

          const tooltipWidth = heatmapTooltip.offsetWidth;
          const panelWidth = heatmapPanel.clientWidth;

          let leftPos = x + 10;
          if (leftPos + tooltipWidth > panelWidth - 10) {
            leftPos = x - tooltipWidth - 10;
          }

          heatmapTooltip.style.left = leftPos + 'px';
          heatmapTooltip.style.top = (y + 10) + 'px';
        } else {
          heatmapTooltip.style.display = 'none';
        }
      });

      heatmapCanvas.addEventListener('mouseleave', () => {
        heatmapTooltip.style.display = 'none';
      });

      document.getElementById('heatmapScroll').addEventListener('scroll', () => {
        if (currentView === 'heatmap') {
          renderHeatmap();
        }
      });

      function switchView(view) {
        currentView = view;
        document.querySelectorAll('.view-btn').forEach(btn => {
          btn.classList.toggle('active', btn.innerText.toLowerCase() === view);
        });

        if (view === 'timeline') {
          timelinePanel.style.display = 'flex';
          heatmapPanel.classList.remove('visible');

          if (detailsWasVisible) {
            detailsPanel.classList.add('visible');
          }

          renderVirtualRows(true);
        } else {
          if (detailsPanel.classList.contains('visible')) {
            detailsWasVisible = true;
            detailsPanel.classList.remove('visible');
          } else {
            detailsWasVisible = false;
          }

          timelinePanel.style.display = 'none';
          heatmapPanel.classList.add('visible');
          renderHeatmap();
        }
      }

      function renderHeatmap() {
        const ctx = heatmapCanvas.getContext('2d');
        const containerWidth = heatmapPanel.clientWidth;
        const height = heatmapPanel.clientHeight;
        const scrollLeft = document.getElementById('heatmapScroll').scrollLeft;

        // Calculate total virtual width
        const totalWidth = containerWidth * heatmapZoom;

        // Update Spacer
        document.getElementById('heatmapSpacer').style.width = totalWidth + 'px';

        const dpr = window.devicePixelRatio || 1;

        // Canvas is always viewport size
        heatmapCanvas.width = containerWidth * dpr;
        heatmapCanvas.height = height * dpr;
        ctx.scale(dpr, dpr);

        ctx.fillStyle = '#0d1117';
        ctx.fillRect(0, 0, containerWidth, height);

        if (filteredEvents.length === 0) return;

        const remotes = {};
        filteredEvents.forEach(evt => {
          if (!remotes[evt.name]) remotes[evt.name] = [];
          remotes[evt.name].push(evt);
        });

        const sortedRemotes = Object.keys(remotes).sort((a, b) => remotes[b].length - remotes[a].length);

        const margin = { top: 30, right: 20, bottom: 20, left: 150 };

        // Virtual chart width
        const chartWidth = totalWidth - margin.left - margin.right;
        const chartHeight = height - margin.top - margin.bottom;

        // Apply Zoom to time bins
        const timeBins = Math.floor(100 * heatmapZoom);
        const binWidth = chartWidth / timeBins;
        const binDuration = totalDuration / timeBins;

        // Adjust row height to fit
        const rowHeight = Math.min(30, chartHeight / sortedRemotes.length);

        // Store data for tooltip (adjusted for virtual scroll)
        window.lastHeatmapData = { sortedRemotes, rowHeight, binWidth, remotes, timeBins, binDuration, margin, scrollLeft };

        ctx.strokeStyle = '#30363d';
        ctx.lineWidth = 1;

        ctx.font = '11px -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif';
        ctx.textAlign = 'right';
        ctx.textBaseline = 'middle';

        let maxBinCount = 0;
        sortedRemotes.forEach(remote => {
          const bins = new Array(timeBins).fill(0);
          remotes[remote].forEach(evt => {
            const binIndex = Math.min(Math.floor(evt.relTime / binDuration), timeBins - 1);
            bins[binIndex]++;
          });
          maxBinCount = Math.max(maxBinCount, ...bins);
        });

        // Update Legend Labels
        window.lastHeatmapData.maxBinCount = maxBinCount;
        window.lastHeatmapData.maxBinCount = maxBinCount;

        sortedRemotes.forEach((remote, i) => {
          const y = margin.top + (i * rowHeight);

          // Draw Label (Fixed position)
          ctx.fillStyle = '#8b949e';
          ctx.fillText(remote.length > 20 ? remote.slice(0, 18) + '...' : remote, margin.left - 10, y + rowHeight / 2);

          // Draw Line
          ctx.beginPath();
          ctx.moveTo(margin.left, y);
          ctx.lineTo(containerWidth - margin.right, y);
          ctx.stroke();

          const bins = new Array(timeBins).fill(0);
          remotes[remote].forEach(evt => {
            const binIndex = Math.min(Math.floor(evt.relTime / binDuration), timeBins - 1);
            bins[binIndex]++;
          });

          bins.forEach((count, binIndex) => {
            if (count === 0) return;

            // Calculate virtual X
            const virtualX = margin.left + (binIndex * binWidth);

            // Apply scroll offset
            const screenX = virtualX - scrollLeft;

            // Only draw if visible
            if (screenX + binWidth < margin.left || screenX > containerWidth - margin.right) return;

            // Clamp to chart area
            const drawX = Math.max(margin.left, screenX);
            const drawWidth = Math.min(binWidth, (containerWidth - margin.right) - drawX);

            const intensity = count / maxBinCount;
            const hue = (1 - intensity) * 240;
            ctx.fillStyle = `hsla(${hue}, 70%, 50%, 0.8)`;

            ctx.fillRect(drawX, y + 2, drawWidth - 1, rowHeight - 4);
          });
        });

        ctx.fillStyle = '#8b949e';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'top';

        const numTicks = 5 * Math.ceil(heatmapZoom);

        for (let i = 0; i <= numTicks; i++) {
          const virtualX = margin.left + (chartWidth * (i / numTicks));
          const screenX = virtualX - scrollLeft;

          if (screenX < margin.left || screenX > containerWidth - margin.right) continue;

          const time = (totalDuration * (i / numTicks)).toFixed(1) + 's';
          ctx.fillText(time, screenX, margin.top - 20);

          ctx.beginPath();
          ctx.moveTo(screenX, margin.top);
          ctx.lineTo(screenX, height - margin.bottom);
          ctx.stroke();
        }
      }

      // Resize observer for heatmap
      new ResizeObserver(() => {
        if (currentView === 'heatmap' && heatmapPanel.classList.contains('visible')) {
          renderHeatmap();
        }
      }).observe(heatmapPanel);

      // Window resize handler for timeline
      window.addEventListener('resize', () => {
        if (currentView === 'timeline') {
          renderVirtualRows(true);
          renderRuler();
        }
      });

      // Virtual Scroll Config
      const ROW_HEIGHT = 29; // 28px + 1px border
      const BUFFER_SIZE = 5;

      function formatTime(seconds) {
        if (seconds < 1) return (seconds * 1000).toFixed(1) + 'ms';
        return seconds.toFixed(2) + 's';
      }

      function formatAbsTime(timestamp) {
        const date = new Date(timestamp * 1000);
        return date.toLocaleTimeString();
      }

      function getIconUrl(className) {
        return `https://robloxapi.github.io/ref/icons/dark/${className}.png`;
      }

      function escapeHtml(text) {
        if (!text) return '';
        return text
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#039;");
      }

      function syntaxHighlight(text) {
        if (!text) return '';

        text = escapeHtml(text);
        return text
          .replace(/&quot;((?:[^&]|&(?!(quot;)))*)&quot;/g, '<span class="hl-str">"$1"</span>')
          .replace(/\b(\d+(\.\d+)?)\b/g, '<span class="hl-num">$1</span>')
          .replace(/\b(true|false)\b/g, '<span class="hl-bool">$1</span>')
          .replace(/\b(nil)\b/g, '<span class="hl-nil">$1</span>');
      }

      // Toast Logic
      function showToast(message) {
        const toast = document.getElementById('toast');
        const msgSpan = document.getElementById('toastMessage');
        msgSpan.innerText = message;
        toast.classList.add('visible');
        setTimeout(() => {
          toast.classList.remove('visible');
        }, 2000);
      }

      function copyText(text, message = "Copied to clipboard") {
        navigator.clipboard.writeText(text).then(() => {
          showToast(message);
        });
      }

      function copyArgs(btn) {
        if (selectedEvent) {
          navigator.clipboard.writeText(selectedEvent.args).then(() => {
            btn.classList.add('copied');
            setTimeout(() => btn.classList.remove('copied'), 2000);
          });
        }
      }

      function toggleCallerDropdown(e) {
        e.stopPropagation();
        const menu = document.getElementById('callerDropdown');
        if (menu) {
          menu.classList.toggle('visible');
        }
      }

      function copyCallerData(type) {
        if (!selectedEvent) return;
        let text = "";
        let msg = "Copied to clipboard";
        switch (type) {
          case 'hash':
            text = selectedEvent.funcHash || "N/A";
            msg = "Function Hash copied";
            break;
          case 'upvalues':
            text = selectedEvent.upvalues || "{}";
            msg = "Upvalues copied";
            break;
          case 'protos':
            text = selectedEvent.protos || "[]";
            msg = "Protos copied";
            break;
          case 'path':
            text = selectedEvent.origin || "N/A";
            msg = "Script Path copied";
            break;
          case 'source':
            text = selectedEvent.funcSource || "N/A";
            msg = "Source copied";
            break;
        }
        copyText(text, msg);
        document.getElementById('callerDropdown').classList.remove('visible');
      }

      // Render Ruler
      function renderRuler() {
        rulerContainer.innerHTML = '';
        const tickCount = Math.max(5, Math.floor(5 * zoomLevel));
        for (let i = 0; i <= tickCount; i++) {
          const pct = (i / tickCount) * 100;
          const time = (totalDuration * (i / tickCount));
          const tick = document.createElement('div');
          tick.className = 'tick';
          tick.style.left = pct + '%';
          tick.innerText = formatTime(time);
          rulerContainer.appendChild(tick);
        }
      }

      // Scroll Sync
      rowsContainer.addEventListener('scroll', () => {
        timelineHeader.scrollLeft = rowsContainer.scrollLeft;
      });

      // Virtual Rendering
      function renderVirtualRows(force = false) {
        const scrollTop = rowsContainer.scrollTop;
        const containerHeight = rowsContainer.clientHeight;

        const totalHeight = filteredEvents.length * ROW_HEIGHT;
        virtualSpacer.style.height = totalHeight + 'px';

        const startIndex = Math.floor(scrollTop / ROW_HEIGHT);
        const endIndex = Math.min(filteredEvents.length, Math.ceil((scrollTop + containerHeight) / ROW_HEIGHT) + BUFFER_SIZE);

        if (!force && startIndex === lastStartIndex && endIndex === lastEndIndex) {
          return;
        }

        lastStartIndex = startIndex;
        lastEndIndex = endIndex;

        const visibleEvents = filteredEvents.slice(Math.max(0, startIndex - BUFFER_SIZE), endIndex);
        const startOffset = Math.max(0, startIndex - BUFFER_SIZE) * ROW_HEIGHT;

        virtualContent.style.transform = `translateY(${startOffset}px)`;

        const fragment = document.createDocumentFragment();
        const zoomWidth = (100 * zoomLevel) + '%';

        // Sync Ruler Width
        document.getElementById('ruler').style.width = zoomWidth;

        visibleEvents.forEach((evt) => {
          const row = document.createElement('div');
          row.className = 'trace-row';
          if (selectedEvent === evt) row.classList.add('selected');

          row.evtData = evt;
          row.onclick = function () { selectRow(this, evt); };

          const listCol = document.createElement('div');
          listCol.className = 'row-list';
          listCol.innerHTML = `
                    <div class="type-icon" style="background-image: url('${getIconUrl(evt.className)}')"></div>
                    <div class="remote-name" title="${evt.name}">${evt.name}</div>
                `;

          const timelineCol = document.createElement('div');
          timelineCol.className = 'row-timeline';
          timelineCol.style.width = zoomWidth;
          timelineCol.style.flex = 'none';

          const marker = document.createElement('div');
          marker.className = `timeline-marker ${evt.typeClass}`;

          let leftPct = ((evt.relTime) / totalDuration) * 100;
          if (leftPct > 99) leftPct = 99;

          let widthPct = (0.05 / totalDuration) * 100;
          if (widthPct < 1) widthPct = 1;

          marker.style.left = leftPct + '%';
          marker.style.width = widthPct + '%';

          timelineCol.appendChild(marker);
          row.appendChild(listCol);
          row.appendChild(timelineCol);
          fragment.appendChild(row);
        });

        virtualContent.innerHTML = '';
        virtualContent.appendChild(fragment);
      }

      // Ctrl+F Handler
      document.addEventListener('keydown', function (e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
          e.preventDefault();
          const filterInput = document.getElementById('filterInput');
          filterInput.focus();
          filterInput.select();
        }
      });

      // Initial Render
      renderVirtualRows();
      renderRuler();

      function selectRow(el, evt) {
        const prev = virtualContent.querySelector('.trace-row.selected');
        if (prev) prev.classList.remove('selected');

        el.classList.add('selected');
        selectedEvent = evt;

        detailsPanel.classList.add('visible');

        const isIncoming = evt.typeClass === 'incoming';
        const badgeClass = isIncoming ? 'incoming' : 'outgoing';

        // Flags with Unified Style
        let flagsHtml = '';
        if (evt.isExecutor) {
          flagsHtml += `<div class="badge-pill executor">Executor</div>`;
        }
        if (evt.isActor) {
          flagsHtml += `<div class="badge-pill actor">Actor</div>`;
        }
        if (!flagsHtml) flagsHtml = '<span style="color:var(--text-secondary); font-size:11px;">None</span>';

        const highlightedArgs = syntaxHighlight(evt.args);

        // Icons
        const copyIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy icon-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`;
        const checkIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check icon-check"><path d="M20 6 9 17l-5-5"/></svg>`;
        const parenthesesIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-parentheses"><path d="M8 21s-4-3-4-9 4-9 4-9"/><path d="M16 3s4 3 4 9-4 9-4 9"/></svg>`;

        // Dropdown Icons
        const hashIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hash"><line x1="4" x2="20" y1="9" y2="9"/><line x1="4" x2="20" y1="15" y2="15"/><line x1="10" x2="8" y1="3" y2="21"/><line x1="16" x2="14" y1="3" y2="21"/></svg>`;
        const upvaluesIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-a-arrow-up"><path d="m14 11 4-4 4 4"/><path d="M18 16V7"/><path d="m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16"/><path d="M3.304 13h6.392"/></svg>`;
        const protosIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-function"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><path d="M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3"/><path d="M9 11.2h5.7"/></svg>`;
        const pathIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-route"><circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/><circle cx="18" cy="5" r="3"/></svg>`;
        const sourceIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code"><path d="m16 18 6-6-6-6"/><path d="m8 6-6 6 6 6"/></svg>`;
        const boxIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-box"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22v-9"/></svg>`;

        detailsContent.innerHTML = `
                <div class="details-header-top">
                    <div class="details-title-group">
                        <div class="details-icon-large" style="background-image: url('${getIconUrl(evt.className)}')"></div>
                        <div class="details-name-large">${escapeHtml(evt.name)}</div>
                    </div>
                    <div class="details-actions">
                        <div class="badge-pill ${badgeClass}">${evt.typeClass.toUpperCase()}</div>
                        <div class="close-btn" onclick="closeDetails()">Ã—</div>
                    </div>
                </div>

                <div class="details-path-row" onclick="copyText('${escapeHtml(evt.path).replace(/'/g, "\\'").replace(/"/g, "&quot;")}', 'Remote Path copied')" title="Click to copy path"><span class="clickable-path">${escapeHtml(evt.path)}</span></div>

                <div class="info-grid">
                    <div class="info-item">
                        <h4>Method</h4>
                        <div>${escapeHtml(evt.method)}</div>
                    </div>
                    <div class="info-item">
                        <h4>Timestamp</h4>
                        <div>${formatAbsTime(evt.timestamp)} <span style="color:var(--text-secondary)">(+${formatTime(evt.relTime)})</span></div>
                    </div>
                    <div class="info-item">
                        <h4>ClassName</h4>
                        <div>${escapeHtml(evt.className)}</div>
                    </div>
                    <div class="info-item">
                        <h4>Remote Path</h4>
                        <div class="remote-path-copy clickable-path" onclick="copyText('${escapeHtml(evt.path).replace(/'/g, "\\'").replace(/"/g, "&quot;")}', 'Remote Path copied')" title="Click to copy path">${escapeHtml(evt.path)}</div>
                    </div>
                </div>

                <div class="content-box">
                    <div class="box-title">Caller Data</div>
                    <button class="copy-icon-btn" onclick="toggleCallerDropdown(event)" title="Copy Caller Info">${copyIcon}</button>

                    <div id="callerDropdown" class="dropdown-menu">
                        <div class="dropdown-item" onclick="copyCallerData('hash')">${hashIcon} Function Hash</div>
                        <div class="dropdown-item" onclick="copyCallerData('upvalues')">${upvaluesIcon} Upvalues</div>
                        <div class="dropdown-item" onclick="copyCallerData('protos')">${protosIcon} Protos</div>
                        <div class="dropdown-item" onclick="copyCallerData('constants')">${boxIcon} Constants</div>
                        <div class="dropdown-item" onclick="copyCallerData('path')">${pathIcon} Script Path</div>
                        <div class="dropdown-item" onclick="copyCallerData('source')">${sourceIcon} Func Source</div>
                    </div>

                    <div class="caller-header">
                        <div class="caller-icon">${parenthesesIcon}</div>
                        <div class="caller-info">
                            <div class="caller-name">${escapeHtml(evt.funcName)} <span class="caller-source">:${evt.funcLine}</span></div>
                            <div class="caller-source">${escapeHtml(evt.funcSource)}</div>
                        </div>
                    </div>

                    <div class="info-grid-2" style="margin-bottom:0; gap:10px;">
                         <div class="info-item-2" style="margin-right: 100px;">
                            <h4>Flags</h4>
                            <div class="flags-row">${flagsHtml}</div>
                         </div>
                         <div class="info-item-2">
                            <h4>Origin</h4>
                            <div class="origin-row clickable-path" onclick="copyText('${escapeHtml(evt.origin).replace(/'/g, "\\'").replace(/"/g, "&quot;")}', 'Origin copied')" title="Click to copy origin">${escapeHtml(evt.origin)}</div>
                         </div>
                    </div>
                </div>

                <div class="content-box">
                    <div class="box-title">Arguments</div>
                    <button class="copy-icon-btn" onclick="copyArgs(this)" title="Copy Arguments">
                        ${copyIcon}
                        ${checkIcon}
                    </button>
                    <div class="args-content">${highlightedArgs}</div>
                </div>
            `;
      }

      function closeDetails() {
        detailsPanel.classList.remove('visible');
        const prev = virtualContent.querySelector('.trace-row.selected');
        if (prev) prev.classList.remove('selected');
        selectedEvent = null;
      }

      function handleFilterInput() {
        if (filterTimeout) clearTimeout(filterTimeout);
        filterTimeout = setTimeout(applyFilters, 300);
      }

      function toggleSearchOptions() {
        const widget = document.getElementById('searchChevron').closest('.search-widget');
        const options = document.getElementById('searchOptions');
        const chevron = document.getElementById('searchChevron');

        options.classList.toggle('visible');
        chevron.classList.toggle('expanded');
        widget.classList.toggle('expanded');
      }

      function handleTimeInput() {
        const minVal = parseFloat(document.getElementById('minTimeInput').value);
        const maxVal = parseFloat(document.getElementById('maxTimeInput').value);
        const unit = parseFloat(document.getElementById('timeUnitSelect').value);

        filterMinTime = isNaN(minVal) ? 0 : minVal * unit;
        filterMaxTime = isNaN(maxVal) ? totalDuration : maxVal * unit;

        if (filterTimeout) clearTimeout(filterTimeout);
        filterTimeout = setTimeout(applyFilters, 300);
      }

      function applyFilters() {
        const query = document.getElementById('filterInput').value.toLowerCase();
        const checkIncoming = document.getElementById('filterIncoming').checked;
        const checkOutgoing = document.getElementById('filterOutgoing').checked;
        const checkActor = document.getElementById('filterActor').checked;
        const checkNonActor = document.getElementById('filterNonActor').checked;
        const checkArgs = document.getElementById('filterArgs').checked;
        const checkProto = document.getElementById('filterProto').checked;
        const checkConst = document.getElementById('filterConst').checked;
        const checkHash = document.getElementById('filterHash').checked;
        const checkSource = document.getElementById('filterSource').checked;

        filteredEvents = allEvents.filter(evt => {
          // Filter by Type (Incoming/Outgoing)
          if (checkIncoming || checkOutgoing) {
            const isIncoming = evt.typeClass === 'incoming';
            const isOutgoing = evt.typeClass === 'outgoing';
            if (!((checkIncoming && isIncoming) || (checkOutgoing && isOutgoing))) {
              return false;
            }
          }

          // Filter by Actor Status
          if (checkActor || checkNonActor) {
            const isActor = evt.isActor;
            const isNonActor = !evt.isActor;
            if (!((checkActor && isActor) || (checkNonActor && isNonActor))) {
              return false;
            }
          }

          let matchesText = !query;

          if (!matchesText) {
            // Default search: Name and Type
            if (evt.name.toLowerCase().includes(query) || evt.type.toLowerCase().includes(query)) {
              matchesText = true;
            }
            // Advanced search options
            else {
              if (checkArgs && evt.args && evt.args.toLowerCase().includes(query)) matchesText = true;
              else if (checkProto && evt.protos && evt.protos.toLowerCase().includes(query)) matchesText = true;
              else if (checkConst && evt.constants && evt.constants.toLowerCase().includes(query)) matchesText = true;
              else if (checkHash && evt.funcHash && evt.funcHash.toLowerCase().includes(query)) matchesText = true;
              else if (checkSource && evt.funcSource && evt.funcSource.toLowerCase().includes(query)) matchesText = true;
            }
          }

          const matchesTime = evt.relTime >= filterMinTime && evt.relTime <= filterMaxTime;

          return matchesText && matchesTime;
        });

        // Update Stats
        statsLabel.innerText = `${filteredEvents.length} Events â€¢ ${totalDuration.toFixed(2)}s`;

        // Reset Scroll
        rowsContainer.scrollTop = 0;
        lastStartIndex = -1;
        lastEndIndex = -1;

        if (currentView === 'timeline') {
          renderVirtualRows(true);
        } else {
          renderHeatmap();
        }
      } function updateZoom() {
        const width = (100 * zoomLevel) + '%';
        rulerContainer.style.width = width;
        renderRuler();
        lastStartIndex = -1;
        renderVirtualRows(true);
      }

      rowsContainer.addEventListener('wheel', (e) => {
        if (e.ctrlKey) {
          e.preventDefault();
          if (e.deltaY < 0) {
            zoomLevel = Math.min(zoomLevel * 1.1, 20);
          } else {
            zoomLevel = Math.max(zoomLevel / 1.1, 1);
          }
          updateZoom();
        }
      });

      rowsContainer.addEventListener('scroll', () => {
        timelineHeader.scrollLeft = rowsContainer.scrollLeft;

        if (!isScrolling) {
          window.requestAnimationFrame(() => {
            renderVirtualRows();
            isScrolling = false;
          });
          isScrolling = true;
        }
      });

      const sessionInfo = document.querySelector('.session-info');
      const tooltip = document.querySelector('.session-tooltip');

      sessionInfo.addEventListener('click', (e) => {
        e.stopPropagation();
        tooltip.classList.toggle('visible');
      });

      tooltip.addEventListener('click', (e) => {
        e.stopPropagation();
      });

      document.addEventListener('click', () => {
        tooltip.classList.remove('visible');
        const dropdown = document.getElementById('callerDropdown');
        if (dropdown) dropdown.classList.remove('visible');
      });
    </script>
  </body>
</html>
